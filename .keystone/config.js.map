{
  "version": 3,
  "sources": ["../keystone.ts", "../schema.ts", "../auth.ts"],
  "sourcesContent": ["import \"dotenv/config\"\nimport { config } from \"@keystone-6/core\"\n\nimport { lists } from \"./schema\"\nimport { withAuth, session } from \"./auth\"\n\nexport default withAuth(\n\tconfig({\n\t\tdb: {\n\t\t\tprovider: \"postgresql\",\n\t\t\turl: process.env.DATABASE_URL || \"\",\n\t\t},\n\t\tlists,\n\t\tsession,\n\t\tui: {\n\t\t\tisAccessAllowed: ({ session }) => {\n\t\t\t\treturn !!session?.data\n\t\t\t},\n\t\t},\n\t})\n)\n", "import \"dotenv/config\"\nimport { list } from \"@keystone-6/core\"\nimport { allowAll } from \"@keystone-6/core/access\"\nimport { cloudinaryImage } from \"@keystone-6/cloudinary\"\nimport {\n\ttext,\n\tpassword,\n\ttimestamp,\n\tselect,\n\tinteger,\n\trelationship,\n} from \"@keystone-6/core/fields\"\n\nimport type { Lists } from \".keystone/types\"\n\nexport const lists: Lists = {\n\tUser: list({\n\t\taccess: allowAll,\n\t\tfields: {\n\t\t\tname: text({ validation: { isRequired: true } }),\n\n\t\t\temail: text({\n\t\t\t\tvalidation: { isRequired: true },\n\t\t\t\tisIndexed: \"unique\",\n\t\t\t}),\n\n\t\t\tpassword: password({ validation: { isRequired: true } }),\n\n\t\t\tcreatedAt: timestamp({\n\t\t\t\tdefaultValue: { kind: \"now\" },\n\t\t\t}),\n\t\t},\n\t}),\n\n\tProduct: list({\n\t\taccess: allowAll,\n\t\tfields: {\n\t\t\tname: text({ validation: { isRequired: true } }),\n\t\t\tdescription: text({\n\t\t\t\tui: {\n\t\t\t\t\tdisplayMode: \"textarea\",\n\t\t\t\t},\n\t\t\t}),\n\t\t\tphoto: relationship({\n\t\t\t\tref: \"ProductImage.product\",\n\t\t\t\tui: {\n\t\t\t\t\tdisplayMode: \"cards\",\n\t\t\t\t\tcardFields: [\"image\", \"altText\"],\n\t\t\t\t\tinlineCreate: { fields: [\"image\", \"altText\"] },\n\t\t\t\t\tinlineEdit: { fields: [\"image\", \"altText\"] },\n\t\t\t\t},\n\t\t\t}),\n\t\t\tstatus: select({\n\t\t\t\toptions: [\n\t\t\t\t\t{ label: \"Draft\", value: \"DRAFT\" },\n\t\t\t\t\t{ label: \"Available\", value: \"AVAILABLE\" },\n\t\t\t\t\t{ label: \"Unavailable\", value: \"UNAVAILABLE\" },\n\t\t\t\t],\n\t\t\t\tdefaultValue: \"DRAFT\",\n\t\t\t\tui: {\n\t\t\t\t\tdisplayMode: \"segmented-control\",\n\t\t\t\t\tcreateView: { fieldMode: \"hidden\" },\n\t\t\t\t},\n\t\t\t}),\n\t\t\tprice: integer(),\n\t\t},\n\t\tui: {\n\t\t\tlistView: {\n\t\t\t\tinitialColumns: [\"name\", \"description\", \"status\", \"price\"],\n\t\t\t},\n\t\t},\n\t}),\n\n\tProductImage: list({\n\t\taccess: allowAll,\n\t\tfields: {\n\t\t\timage: cloudinaryImage({\n\t\t\t\tcloudinary: {\n\t\t\t\t\tcloudName: process.env.CLOUDINARY_CLOUD_NAME || \"\",\n\t\t\t\t\tapiKey: process.env.CLOUDINARY_API_KEY || \"\",\n\t\t\t\t\tapiSecret: process.env.CLOUDINARY_API_SECRET || \"\",\n\t\t\t\t\tfolder: process.env.CLOUDINARY_API_FOLDER,\n\t\t\t\t},\n\t\t\t\tlabel: \"Source\",\n\t\t\t}),\n\t\t\taltText: text(),\n\t\t\tproduct: relationship({ ref: \"Product.photo\" }),\n\t\t},\n\t\tui: {\n\t\t\tlistView: {\n\t\t\t\tinitialColumns: [\"image\", \"altText\", \"product\"],\n\t\t\t},\n\t\t},\n\t}),\n}\n", "import { randomBytes } from \"crypto\"\nimport { createAuth } from \"@keystone-6/auth\"\nimport { statelessSessions } from \"@keystone-6/core/session\"\n\nlet sessionSecret = process.env.SESSION_SECRET\nif (!sessionSecret && process.env.NODE_ENV !== \"production\") {\n\tsessionSecret = randomBytes(32).toString(\"hex\")\n}\n\nconst { withAuth } = createAuth({\n\tlistKey: \"User\",\n\tidentityField: \"email\",\n\tsessionData: \"id name email createdAt\",\n\tsecretField: \"password\",\n\n\tinitFirstItem: {\n\t\tfields: [\"name\", \"email\", \"password\"],\n\t},\n})\n\nconst sessionMaxAge = 60 * 60 * 24 * 30\n\nconst session = statelessSessions({\n\tmaxAge: sessionMaxAge,\n\tsecret: sessionSecret!,\n})\n\nexport { withAuth, session }\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAAA,iBAAO;AACP,IAAAC,eAAuB;;;ACDvB,oBAAO;AACP,kBAAqB;AACrB,oBAAyB;AACzB,wBAAgC;AAChC,oBAOO;AAIA,IAAM,QAAe;AAAA,EAC3B,UAAM,kBAAK;AAAA,IACV,QAAQ;AAAA,IACR,QAAQ;AAAA,MACP,UAAM,oBAAK,EAAE,YAAY,EAAE,YAAY,KAAK,EAAE,CAAC;AAAA,MAE/C,WAAO,oBAAK;AAAA,QACX,YAAY,EAAE,YAAY,KAAK;AAAA,QAC/B,WAAW;AAAA,MACZ,CAAC;AAAA,MAED,cAAU,wBAAS,EAAE,YAAY,EAAE,YAAY,KAAK,EAAE,CAAC;AAAA,MAEvD,eAAW,yBAAU;AAAA,QACpB,cAAc,EAAE,MAAM,MAAM;AAAA,MAC7B,CAAC;AAAA,IACF;AAAA,EACD,CAAC;AAAA,EAED,aAAS,kBAAK;AAAA,IACb,QAAQ;AAAA,IACR,QAAQ;AAAA,MACP,UAAM,oBAAK,EAAE,YAAY,EAAE,YAAY,KAAK,EAAE,CAAC;AAAA,MAC/C,iBAAa,oBAAK;AAAA,QACjB,IAAI;AAAA,UACH,aAAa;AAAA,QACd;AAAA,MACD,CAAC;AAAA,MACD,WAAO,4BAAa;AAAA,QACnB,KAAK;AAAA,QACL,IAAI;AAAA,UACH,aAAa;AAAA,UACb,YAAY,CAAC,SAAS,SAAS;AAAA,UAC/B,cAAc,EAAE,QAAQ,CAAC,SAAS,SAAS,EAAE;AAAA,UAC7C,YAAY,EAAE,QAAQ,CAAC,SAAS,SAAS,EAAE;AAAA,QAC5C;AAAA,MACD,CAAC;AAAA,MACD,YAAQ,sBAAO;AAAA,QACd,SAAS;AAAA,UACR,EAAE,OAAO,SAAS,OAAO,QAAQ;AAAA,UACjC,EAAE,OAAO,aAAa,OAAO,YAAY;AAAA,UACzC,EAAE,OAAO,eAAe,OAAO,cAAc;AAAA,QAC9C;AAAA,QACA,cAAc;AAAA,QACd,IAAI;AAAA,UACH,aAAa;AAAA,UACb,YAAY,EAAE,WAAW,SAAS;AAAA,QACnC;AAAA,MACD,CAAC;AAAA,MACD,WAAO,uBAAQ;AAAA,IAChB;AAAA,IACA,IAAI;AAAA,MACH,UAAU;AAAA,QACT,gBAAgB,CAAC,QAAQ,eAAe,UAAU,OAAO;AAAA,MAC1D;AAAA,IACD;AAAA,EACD,CAAC;AAAA,EAED,kBAAc,kBAAK;AAAA,IAClB,QAAQ;AAAA,IACR,QAAQ;AAAA,MACP,WAAO,mCAAgB;AAAA,QACtB,YAAY;AAAA,UACX,WAAW,QAAQ,IAAI,yBAAyB;AAAA,UAChD,QAAQ,QAAQ,IAAI,sBAAsB;AAAA,UAC1C,WAAW,QAAQ,IAAI,yBAAyB;AAAA,UAChD,QAAQ,QAAQ,IAAI;AAAA,QACrB;AAAA,QACA,OAAO;AAAA,MACR,CAAC;AAAA,MACD,aAAS,oBAAK;AAAA,MACd,aAAS,4BAAa,EAAE,KAAK,gBAAgB,CAAC;AAAA,IAC/C;AAAA,IACA,IAAI;AAAA,MACH,UAAU;AAAA,QACT,gBAAgB,CAAC,SAAS,WAAW,SAAS;AAAA,MAC/C;AAAA,IACD;AAAA,EACD,CAAC;AACF;;;AC9FA,oBAA4B;AAC5B,kBAA2B;AAC3B,qBAAkC;AAElC,IAAI,gBAAgB,QAAQ,IAAI;AAChC,IAAI,CAAC,iBAAiB,QAAQ,IAAI,aAAa,cAAc;AAC5D,sBAAgB,2BAAY,EAAE,EAAE,SAAS,KAAK;AAC/C;AAEA,IAAM,EAAE,SAAS,QAAI,wBAAW;AAAA,EAC/B,SAAS;AAAA,EACT,eAAe;AAAA,EACf,aAAa;AAAA,EACb,aAAa;AAAA,EAEb,eAAe;AAAA,IACd,QAAQ,CAAC,QAAQ,SAAS,UAAU;AAAA,EACrC;AACD,CAAC;AAED,IAAM,gBAAgB,KAAK,KAAK,KAAK;AAErC,IAAM,cAAU,kCAAkB;AAAA,EACjC,QAAQ;AAAA,EACR,QAAQ;AACT,CAAC;;;AFnBD,IAAO,mBAAQ;AAAA,MACd,qBAAO;AAAA,IACN,IAAI;AAAA,MACH,UAAU;AAAA,MACV,KAAK,QAAQ,IAAI,gBAAgB;AAAA,IAClC;AAAA,IACA;AAAA,IACA;AAAA,IACA,IAAI;AAAA,MACH,iBAAiB,CAAC,EAAE,SAAAC,SAAQ,MAAM;AACjC,eAAO,CAAC,CAACA,UAAS;AAAA,MACnB;AAAA,IACD;AAAA,EACD,CAAC;AACF;",
  "names": ["import_config", "import_core", "session"]
}
