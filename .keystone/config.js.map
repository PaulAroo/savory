{
  "version": 3,
  "sources": ["../keystone.ts", "../schema.ts", "../auth.ts", "../seed-data/data.ts", "../seed-data/index.ts"],
  "sourcesContent": ["import \"dotenv/config\"\nimport { config } from \"@keystone-6/core\"\n\nimport { lists } from \"./schema\"\nimport { TypeInfo } from \".keystone/types\"\nimport { withAuth, session } from \"./auth\"\nimport { insertSeedData } from \"./seed-data\"\n\nexport default withAuth(\n\tconfig<TypeInfo>({\n\t\tserver: {\n\t\t\tcors: {\n\t\t\t\torigin: [process.env.FRONTEND_URL],\n\t\t\t\tcredentials: true,\n\t\t\t},\n\t\t},\n\t\tdb: {\n\t\t\tprovider: \"postgresql\",\n\t\t\turl: process.env.DATABASE_URL || \"\",\n\t\t\tasync onConnect(keystoneContext) {\n\t\t\t\tif (process.argv.includes(\"--seed-data\")) {\n\t\t\t\t\tawait insertSeedData(keystoneContext)\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\n\t\tlists,\n\t\tsession,\n\t\tui: {\n\t\t\tisAccessAllowed: ({ session }) => {\n\t\t\t\treturn !!session?.data\n\t\t\t},\n\t\t},\n\n\t\ttypes: {\n\t\t\tpath: \"./.keystone/types.ts\",\n\t\t},\n\t})\n)\n", "import \"dotenv/config\"\nimport { list } from \"@keystone-6/core\"\nimport { allowAll } from \"@keystone-6/core/access\"\nimport { cloudinaryImage } from \"@keystone-6/cloudinary\"\nimport {\n\ttext,\n\tpassword,\n\ttimestamp,\n\tselect,\n\tinteger,\n\trelationship,\n} from \"@keystone-6/core/fields\"\n\nimport type { Lists } from \".keystone/types\"\n\nexport const lists: Lists = {\n\tUser: list({\n\t\taccess: allowAll,\n\t\tfields: {\n\t\t\tname: text({ validation: { isRequired: true } }),\n\n\t\t\temail: text({\n\t\t\t\tvalidation: { isRequired: true },\n\t\t\t\tisIndexed: \"unique\",\n\t\t\t}),\n\n\t\t\tpassword: password({ validation: { isRequired: true } }),\n\n\t\t\tcreatedAt: timestamp({\n\t\t\t\tdefaultValue: { kind: \"now\" },\n\t\t\t}),\n\t\t},\n\t}),\n\n\tProduct: list({\n\t\taccess: allowAll,\n\t\tfields: {\n\t\t\tname: text({ validation: { isRequired: true } }),\n\t\t\tdescription: text({\n\t\t\t\tui: {\n\t\t\t\t\tdisplayMode: \"textarea\",\n\t\t\t\t},\n\t\t\t}),\n\t\t\tphoto: relationship({\n\t\t\t\tref: \"ProductImage.product\",\n\t\t\t\tui: {\n\t\t\t\t\tdisplayMode: \"cards\",\n\t\t\t\t\tcardFields: [\"image\", \"altText\"],\n\t\t\t\t\tinlineCreate: { fields: [\"image\", \"altText\"] },\n\t\t\t\t\tinlineEdit: { fields: [\"image\", \"altText\"] },\n\t\t\t\t},\n\t\t\t}),\n\t\t\tstatus: select({\n\t\t\t\toptions: [\n\t\t\t\t\t{ label: \"Draft\", value: \"DRAFT\" },\n\t\t\t\t\t{ label: \"Available\", value: \"AVAILABLE\" },\n\t\t\t\t\t{ label: \"Unavailable\", value: \"UNAVAILABLE\" },\n\t\t\t\t],\n\t\t\t\tdefaultValue: \"DRAFT\",\n\t\t\t\tui: {\n\t\t\t\t\tdisplayMode: \"segmented-control\",\n\t\t\t\t\tcreateView: { fieldMode: \"hidden\" },\n\t\t\t\t},\n\t\t\t}),\n\t\t\tprice: integer(),\n\t\t},\n\t\tui: {\n\t\t\tlistView: {\n\t\t\t\tinitialColumns: [\"name\", \"description\", \"status\", \"price\"],\n\t\t\t},\n\t\t},\n\t}),\n\n\tProductImage: list({\n\t\taccess: allowAll,\n\t\tfields: {\n\t\t\timage: cloudinaryImage({\n\t\t\t\tcloudinary: {\n\t\t\t\t\tcloudName: process.env.CLOUDINARY_CLOUD_NAME || \"\",\n\t\t\t\t\tapiKey: process.env.CLOUDINARY_API_KEY || \"\",\n\t\t\t\t\tapiSecret: process.env.CLOUDINARY_API_SECRET || \"\",\n\t\t\t\t\tfolder: process.env.CLOUDINARY_API_FOLDER,\n\t\t\t\t},\n\t\t\t\tlabel: \"Source\",\n\t\t\t}),\n\t\t\taltText: text(),\n\t\t\tproduct: relationship({ ref: \"Product.photo\" }),\n\t\t},\n\t\tui: {\n\t\t\tlistView: {\n\t\t\t\tinitialColumns: [\"image\", \"altText\", \"product\"],\n\t\t\t},\n\t\t},\n\t}),\n}\n", "import { randomBytes } from \"crypto\"\nimport { createAuth } from \"@keystone-6/auth\"\nimport { statelessSessions } from \"@keystone-6/core/session\"\n\nlet sessionSecret = process.env.SESSION_SECRET\nif (!sessionSecret && process.env.NODE_ENV !== \"production\") {\n\tsessionSecret = randomBytes(32).toString(\"hex\")\n}\n\nconst { withAuth } = createAuth({\n\tlistKey: \"User\",\n\tidentityField: \"email\",\n\tsessionData: \"id name email createdAt\",\n\tsecretField: \"password\",\n\n\tinitFirstItem: {\n\t\tfields: [\"name\", \"email\", \"password\"],\n\t},\n})\n\nconst sessionMaxAge = 60 * 60 * 24 * 30\n\nconst session = statelessSessions({\n\tmaxAge: sessionMaxAge,\n\tsecret: sessionSecret!,\n})\n\nexport { withAuth, session }\n", "function timestamp() {\n\t// sometime in the last 30 days\n\tconst stampy =\n\t\tDate.now() - Math.floor(Math.random() * 1000 * 60 * 60 * 24 * 30)\n\treturn new Date(stampy).toISOString()\n}\n\nexport const products = [\n\t{\n\t\tname: \"Yeti Hondo\",\n\t\tdescription: \"soo nice\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 3423,\n\t},\n\t{\n\t\tname: \"Airmax 270\",\n\t\tdescription: \"Great shoes!\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 5234,\n\t},\n\t{\n\t\tname: \"KITH Hoodie\",\n\t\tdescription: \"Love this hoodie\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 23562,\n\t},\n\t{\n\t\tname: \"Fanorak\",\n\t\tdescription: \"Super hip. Comes in a number of colours\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 252342,\n\t},\n\t{\n\t\tname: \"Nike Vapormax\",\n\t\tdescription: \"Kind of squeaky on some floors\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 83456,\n\t},\n\t{\n\t\tname: \"Yeti Cooler\",\n\t\tdescription: \"Who spends this much on a cooler?!\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 75654,\n\t},\n\t{\n\t\tname: \"Naked and Famous Denim\",\n\t\tdescription: \"Japanese Denim, made in Canada\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 10924,\n\t},\n\t{\n\t\tname: \"Rimowa Luggage\",\n\t\tdescription: \"S T E A L T H\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 47734,\n\t},\n\t{\n\t\tname: \"Black Hole \",\n\t\tdescription: \"Outdoorsy \",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 4534,\n\t},\n\t{\n\t\tname: \"Nudie Belt\",\n\t\tdescription: \"Sick design\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 5234,\n\t},\n\t{\n\t\tname: \"Goose\",\n\t\tdescription: \"Keep warm.\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 74544,\n\t},\n\t{\n\t\tname: \"Ultraboost\",\n\t\tdescription: \"blacked out\",\n\t\tstatus: \"AVAILABLE\",\n\t\tprice: 6344,\n\t},\n]\n", "import { products } from \"./data\"\nimport { TypeInfo } from \"../.keystone/types\"\nimport { KeystoneContext } from \"@keystone-6/core/types\"\n\nexport async function insertSeedData(\n\tkeystoneContext: KeystoneContext<TypeInfo>\n) {\n\tconsole.log(`\uD83C\uDF31 Inserting Seed Data: ${products.length} Products`)\n\tfor (const product of products) {\n\t\tconsole.log(`  \uD83D\uDECD\uFE0F Adding Product: ${product.name}`)\n\n\t\tawait keystoneContext.db.Product.createOne({\n\t\t\tdata: {\n\t\t\t\t...product,\n\t\t\t\tphoto: { create: { altText: product.description } },\n\t\t\t},\n\t\t})\n\t}\n\n\tconsole.log(`\u2705 Seed Data Inserted: ${products.length} Products`)\n\tprocess.exit()\n}\n"],
  "mappings": "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",
  "names": ["import_config", "import_core", "session"]
}
